# Lab3 教学科研登记系统

## 一、概述

### 1.1 系统目标

> 概述本系统的主要开发目标

本实验目标是开发一个面向教师的教学科研登记系统。

### 1.2 需求说明

> 说明本系统的主要功能需求

#### 1.2.1 数据需求

![image-20230529195134091](C:\Users\86198\AppData\Roaming\Typora\typora-user-images\image-20230529195134091.png)

1. 性别为整数，1-男，2-女
2. 教师职称为整数：1-博士后，2-助教，3-讲师，4-副教授，5-特任教授，6-教授，
    7-助理研究员，8-特任副研究员，9-副研究员，10-特任研究员，11-研究员。
3. 论文类型为整数：1-full paper，2-short paper，3-poster paper，4-demo
    paper。
4. 论文级别为整数：1-CCF-A，2-CCF-B，3-CCF-C，4-中文CCF-A，5-中文CCFB，
    6-无级别。
5. 项目类型为整数：1-国家级项目，2-省部级项目，3-市厅级项目，4-企业合作项
    目，5-其它类型项目。
6. 发表论文和承担项目中的排名：1-表示排名第一，以此类推。论文排名第一即为第
    一作者，承担项目排名第一即为项目负责人。
7. 主讲课程中的学期取值为：1-春季学期，2-夏季学期，3-秋季学期。
8. 课程性质为整数：1-本科生课程，2-研究生课程

#### 1.2.2 功能需求

+ **登记发表论文情况：**提供教师论文发表信息的增、删、改、查功能。输入时只要求检查：一篇论文只能有一位通讯作者，论文的作者排名不能有重复，论文的类型和级别只能在约定的取值集合中选取（实现时建议用下拉框）。
+ **登记承担项目情况：**提供教师承担项目信息的增、删、改、查功能。输入时要求检查：排名不能有重复，一个项目中所有教师的承担经费总额应等于项目的总经费，项目类型只能在约定的取值集合中选取。
+ **登记主讲课程情况：**提供教师主讲课程信息的增、删、改、查功能。输入时要求检查：一门课程所有教师的主讲学时总额应等于课程的总学时。
+ **查询统计：**实现按教师工号和给定年份范围汇总查询该教师的教学科研情况的功能。
  + **选作：**实现按教师工号和给定年份范围生成教学科研



### 1.3 本报告的主要贡献

> 概述本报告的主要内容



## 二、总体设计

### 2.1 系统模块结构

> 给出本系统的模块结构图（建议 Visio 画图），包括各级子模块，以及模块之间的接口关系。
>
> 定义每个模块的基本功能。
>
> 模块名称在整个报告中保持一致。





## 2.2 系统工作流程

> 给出系统工作流程图



### 2.3 数据库设计

> 给出数据库设计 ER 图以及最终的物理数据库结构即可。
>
> 如果采用了特殊的物理数据库设计，例如分表、增加了冗余属性等，要求解释理由。
>
> 如果有设计了存储过程和触发器，也需要在这一节中阐述。
>
> 存储过程和触发器的 SQL 代码也可以附上

#### 2.3.1 Power Designer 的 ER 图

![image-20230529211110104](C:\Users\86198\AppData\Roaming\Typora\typora-user-images\image-20230529211110104.png)

#### 2.3.2 物理模型

![image-20230529211019637](C:\Users\86198\AppData\Roaming\Typora\typora-user-images\image-20230529211019637.png)

需要修改主讲课程的主码。

#### 2.3.3 

课程 Course

```sql
create table Course
(
   CID                  char(256) not null  comment '',
   CName                char(256)  comment '',
   CHours               int  comment '',
   CType                int  comment '',
   primary key (CID)
);
```



## 三、详细设计（可选）

> 一个模块一个小节
>
> 给出该模块的输入、输出和程序流程图



## 四、实现与测试

### 4.1 实现结果

> 给出各个功能需求的实现界面和运行结果



### 4.2 测试结果

> 给出各个功能需求的测试用例和测试结果



### 4.3 实现中的难点问题及解决

> 建议按：1. 问题描述，2. 难点分析，3. 已有方法的局限性，4. 我采取的方法，5. 实现效果



## 五、总结与讨论

> 总结本系统开发过程中的主要收获、教训







# 实验记录

+ 运行 `mysql`：net start mysql80
+ 进入某个数据库：use lab3
+ 查看某个表：select * from paper
+ 老师和课程的关系的主码应该也包括学年和学期



+ 我的关系 table 的名字带有下划线，比如 `Teacher_Paper`，python 中定义的 class 会在大小写之间补充下划线，所以在实际定义的时：

  ```python
  class TeacherPaper(db.Model):
      TID = db.Column(db.String(5), db.ForeignKey('teacher.TID'), primary_key=True)
  ```

  
